<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information retrieval</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 50vh;
            margin: 0 auto;
            padding: 20px;
        }

        .search-box {
            width: 100%;
            max-width: 600px;
        }

        .results-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .document {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease-in-out;
        }

        .document.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .document:nth-child(odd) {
            background-color: #e9ecef;
        }

        .document-title {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .document-link {
            font-size: 0.9em;
            color: #007bff;
            text-decoration: none;
        }

        .document-link:hover {
            text-decoration: underline;
        }

        .ranking {
            font-weight: bold;
            color: #6c757d;
            font-size: 1.1em;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <div class="search-container">
        <div class="search-box">
            <form id="search-form">
                <div class="input-group">
                    <input type="text" id="search-input" class="form-control" placeholder="Enter your query">
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="results-container" id="results-container">
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#search-form").submit(function (event) {
                event.preventDefault();
                var query = $("#search-input").val();
                $.ajax({
                    url: "http://localhost:5000/search",
                    data: { query: query },
                    success: function (response) {
                        var results = response.results;
                        var resultsContainer = $("#results-container");
                        resultsContainer.empty();
                        for (var i = 0; i < results.length; i++) {
                            var result = results[i];
                            var documentElement = $('<div class="document"></div>');
                            var rankingElement = $('<span class="ranking"></span>').text((i + 1) + ".");
                            var documentLinkElement = $('<a class="document-link"></a>')
                                .attr("href", result.file)
                                .attr("data-doc-id", result.doc_id)
                                .text(result.titles);
                            documentElement.append(rankingElement);
                            documentElement.append(documentLinkElement);
                            resultsContainer.append(documentElement);

                            // Add animation delay
                            documentElement.css("transition-delay", (i * 0.1) + "s");

                            // Make the document visible after a short delay
                            setTimeout(function (elem) {
                                elem.addClass("visible");
                            }, i * 100, documentElement);
                        }
                    },
                });
            });
        });
    </script>
</body>
</html>

